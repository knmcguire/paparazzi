<!DOCTYPE module SYSTEM "module.dtd">

<module name="uartrotation">
  <doc>
    <description>Writes rotation to the uart bus</description>
    <configure name="STEREO_UART" value="UARTX" description="Sets the UART port number of the connected camera (required)"/>
    <configure name="STEREO_BAUD" value="BXXXXX" description="Sets the BAUD rate of the connected camera (required: must be same as camera)"/>
  </doc>
  <header>
    <file name="uartrotation.h"/>
  </header>
  <init fun="uart_rotation_init()"/>
  <makefile>
    <file name="uartrotation.c"/>
    <file name="stereoprotocol.c" dir="subsystems"/>
<!--    <define name="USE_$(STEREO_UART)"/>
    <define name="UART_LINK" value="$(STEREO_UART_LOWER)"/>
    <define name="$(STEREO_UART)_BAUD" value="$(STEREO_BAUD)"/>-->
	<raw>
		STEREO_UART_LOWER=$(shell echo $(STEREO_UART) | tr A-Z a-z)
		ap.CFLAGS += -DUSE_$(STEREO_UART)
		ap.CFLAGS += -DUART_LINK=$(STEREO_UART_LOWER)
		ap.CFLAGS += -D$(STEREO_UART)_BAUD=$(STEREO_BAUD)
	</raw>
<!--

		ODROID_GPS_PORT_LOWER=$(shell echo $(GPS_PORT) | tr A-Z a-z)
		ap.CFLAGS += -DUSE_$(GPS_PORT) -D$(GPS_PORT)_BAUD=$(GPS_BAUD)
		ap.CFLAGS += -DUSE_GPS -DGPS_LINK=$(ODROID_GPS_PORT_LOWER)

-->
  </makefile>

</module>

